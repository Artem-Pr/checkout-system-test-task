"use strict";(self.webpackChunkcheckout_system_test_task=self.webpackChunkcheckout_system_test_task||[]).push([[74],{4983:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(7313),c=n(5554),i=n(5164),o=n(2164),u=n(6699),a=n(9948),d=n(629),s=n(3803),l=n(9200),p=n(6417),f=function(e){var t=e.productCode,n=e.price,r=(0,d.T)();return(0,p.jsx)(s.Z,{min:1,max:1e3,value:n,onChange:function(e){r((0,l.Uv)({code:t,unitPrice:e||0}))}})},m=n(8116),T=function(e){var t=e.productCode,n=e.discountType,r=e.discountPrice,c=(0,d.T)(),i=n===m.L.WITHOUT_DISCOUNT;return(0,p.jsx)(s.Z,{min:1,max:1e3,value:r,onChange:function(e){c((0,u.NN)(t,e||0))},disabled:i})},v=function(e){var t=e.productCode,n=e.discountType,r=e.discountCount,c=(0,d.T)(),i=n===m.L.WITHOUT_DISCOUNT||n===m.L.UNIT_DISCOUNT;return(0,p.jsx)(s.Z,{min:2,max:1e3,value:r,onChange:function(e){c((0,u.Ok)(t,e||0))},disabled:i})},h=n(7063),C=[{value:m.L.WITHOUT_DISCOUNT,label:"No discount"},{value:m.L.UNIT_DISCOUNT,label:"Discount per unit"},{value:m.L.QUANTITY_DISCOUNT,label:"Quantity discount"}],b=function(e){var t=e.productCode,n=e.discountType,r=(0,d.T)();return(0,p.jsx)(h.Z,{style:{width:160},defaultValue:n,options:C,onChange:function(e){r((0,u.I)(t,e))}})},x=n(9439),y=n(9491),Z=n(6998),I=n(2506),P=n(5576),w=/^[A-Z]+$/i,N=function(e){return[{required:!0,message:"Please enter the code"},{pattern:w,message:"Code has to have only alphabetic letter"},function(){return{validator:function(e,t){return t.length<=1?Promise.resolve():Promise.reject(new Error("Code has to have only 1 letter"))},message:"Code has to have only 1 letter"}},function(){return{validator:function(t,n){return e.includes(n)?Promise.reject(new Error("This code already exists")):Promise.resolve()},message:"This code already exists"}}]},j=function(){var e=(0,d.T)(),t=(0,c.v9)(a.Xp),n=(0,r.useState)(!1),i=(0,x.Z)(n,2),o=i[0],l=i[1],f=(0,r.useMemo)((function(){return t.map((function(e){return e.code}))}),[t]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(y.Z,{className:"m-10",type:"primary",onClick:function(){return l(!0)},children:"Add new product"}),(0,p.jsx)(Z.Z,{title:"Add new product",footer:null,open:o,onCancel:function(){l(!1)},children:(0,p.jsxs)(I.Z,{name:"addNewProduct",onFinish:function(t){e((0,u.xg)(t)),l(!1)},children:[(0,p.jsx)(I.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter the name"}],children:(0,p.jsx)(P.Z,{})}),(0,p.jsx)(I.Z.Item,{label:"Code",name:"code",rules:N(f),children:(0,p.jsx)(P.Z,{})}),(0,p.jsx)(I.Z.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter the price"}],children:(0,p.jsx)(s.Z,{min:2,max:1e3})}),(0,p.jsx)(I.Z.Item,{children:(0,p.jsx)(y.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})},U=r.memo(j),g=[{title:"Product name",dataIndex:"productName",key:"productName"},{title:"Price, \u20ac",dataIndex:"price",key:"price",shouldCellUpdate:function(e,t){return e.code!==t.code||e.price!==t.price},render:function(e,t){var n=t.code,r=t.price;return(0,p.jsx)(f,{productCode:n,price:r})}},{title:"Discount price, \u20ac",dataIndex:"discountPrice",key:"discountPrice",shouldCellUpdate:function(e,t){return e.code!==t.code||e.discountType!==t.discountType||e.discountPrice!==t.discountPrice},render:function(e,t){var n=t.code,r=t.discountType,c=t.discountPrice;return(0,p.jsx)(T,{productCode:n,discountType:r,discountPrice:c})}},{title:"Discount count",dataIndex:"discountCount",key:"discountCount",shouldCellUpdate:function(e,t){return e.code!==t.code||e.discountType!==t.discountType||e.discountCount!==t.discountCount},render:function(e,t){var n=t.code,r=t.discountType,c=t.discountCount;return(0,p.jsx)(v,{productCode:n,discountType:r,discountCount:c})}},{title:"Discount type",dataIndex:"discountType",key:"discountType",shouldCellUpdate:function(e,t){return e.code!==t.code||e.discountType!==t.discountType},render:function(e,t){var n=t.code,r=t.discountType;return(0,p.jsx)(b,{productCode:n,discountType:r})}}],k=i.Z.Title,D=function(){var e=(0,d.T)(),t=(0,c.v9)(a.ap),n=(0,c.v9)(a.kj);return(0,r.useEffect)((function(){!t.length&&e((0,u.t2)())}),[e,t.length]),(0,p.jsxs)("div",{className:"m-10 d-flex flex-column align-center",children:[(0,p.jsx)(k,{level:3,children:"Products settings"}),(0,p.jsx)(o.Z,{columns:g,dataSource:n,pagination:!1,scroll:{x:700}}),(0,p.jsx)(U,{})]})}},6699:function(e,t,n){n.d(t,{xg:function(){return I},t2:function(){return Z},Ok:function(){return o},I:function(){return a},NN:function(){return i}});var r=n(1413),c=n(7996),i=function(e,t){return function(n,i){var o=i().productsReducer.prices[e].specialPrice;if(o){var u=(0,r.Z)((0,r.Z)({},o),{},{data:(0,r.Z)((0,r.Z)({},o.data),{},{price:t})});n((0,c.fJ)({code:e,specialPrice:u}))}}},o=function(e,t){return function(n,i){var o=i().productsReducer.prices[e].specialPrice;if(void 0!==(null===o||void 0===o?void 0:o.data.count)){var u=(0,r.Z)((0,r.Z)({},o),{},{data:(0,r.Z)((0,r.Z)({},o.data),{},{count:t})});n((0,c.fJ)({code:e,specialPrice:u}))}}},u=n(8116),a=function(e,t){return function(n){switch(t){case u.L.QUANTITY_DISCOUNT:n((0,c.fJ)({code:e,specialPrice:{type:u.L.QUANTITY_DISCOUNT,data:{price:1,count:2}}}));break;case u.L.UNIT_DISCOUNT:n((0,c.fJ)({code:e,specialPrice:{type:u.L.UNIT_DISCOUNT,data:{price:1}}}));break;default:n((0,c.bq)(e))}}},d=n(4165),s=n(5861);function l(e){return new Promise((function(t){setTimeout(t,e)}))}var p=n.p+"static/media/42107.efb48a04e4a04bce12e2.webp",f=n.p+"static/media/42111.d936f9eb3d953d7cd06e.webp",m=n.p+"static/media/42123.fd1698f6390dfe5b2b36.webp",T=n.p+"static/media/42138.5521888bf02f3f1f5ad4.webp",v=n.p+"static/media/42140.8a3e4e1b5f5f89f50d4a.webp",h=n.p+"static/media/42141.3acf69a6cb57d1834bb8.webp",C=[{label:"Ford Mustang Shelby GT500",preview:T,code:"A"},{label:"McLaren Senna GTR",preview:m,code:"B"},{label:"App-Controlled Transformation Vehicle",preview:v,code:"C"},{label:"Ducati Panigale V4 R",preview:p,code:"D"},{label:"2022 Ford GT",preview:n.p+"static/media/42154.107df0be4c417666c0f2.webp",code:"E"},{label:"McLaren Formula 1 Race Car",preview:h,code:"F"},{label:"Dom's Dodge Charger",preview:f,code:"G"}],b=function(){var e=(0,s.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(500);case 2:return e.abrupt("return",C);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={getProducts:b},y=n(4255),Z=function(){return function(){var e=(0,s.Z)((0,d.Z)().mark((function e(t){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t((0,y.K)(!0)),e.next=3,x.getProducts();case 3:n=e.sent,t((0,c.RU)(n)),t((0,y.K)(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e){var t=e.name,n=e.code,r=e.price;return function(e){e((0,c.F9)({code:n,label:t,preview:""})),e((0,c.Uv)({code:n,unitPrice:r}))}}},629:function(e,t,n){n.d(t,{T:function(){return r.T}});var r=n(4674)}}]);